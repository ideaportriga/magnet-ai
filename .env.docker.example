# ============================================
# Docker Compose Environment Configuration
# ============================================
# Copy this file to .env and configure for your environment

# --------------------------------------------
# PostgreSQL Database Configuration
# --------------------------------------------
POSTGRES_DB=magnet_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_PORT=5433
POSTGRES_HOST_AUTH_METHOD=trust

# --------------------------------------------
# Application Runtime Configuration
# --------------------------------------------
ENV=development
API_PORT=5000

# Build Configuration
# Set to "false" to skip documentation build (faster for development)
BUILD_DOCS=true

# Web Frontend Configuration
# Set to "true" to include web frontend (admin/panel) in monolith container
WEB_INCLUDED=true

# Database Migration Settings
# Set RUN_MIGRATIONS=true to automatically manage migrations on container start
# - If no migrations exist: creates initial migration from models
# - If migrations exist: applies all pending migrations
RUN_MIGRATIONS=true

# Set RESET_DB=true to completely reset database and migrations (DANGER: destroys all data!)
RESET_DB=false

# Set RUN_FIXTURES=true to load test/seed data on container start
RUN_FIXTURES=false

# --------------------------------------------
# Authentication Configuration
# --------------------------------------------
AUTH_ENABLED=false
AUTH_ENABLED_FOR_SCHEMA=false

# OpenID Connect authentication with Microsoft Entra ID
# Uncomment and configure if using Microsoft authentication
# MICROSOFT_ENTRA_ID_TENANT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# MICROSOFT_ENTRA_ID_CLIENT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# MICROSOFT_ENTRA_ID_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# MICROSOFT_ENTRA_ID_REDIRECT_URI=http://localhost:5000/auth/callback

# Web UI Authentication Configuration
WEB_AUTH_PROVIDER_TITLE=Microsoft
WEB_AUTH_POPUP_WIDTH=600
WEB_AUTH_POPUP_HEIGHT=400

# --------------------------------------------
# Security Configuration
# --------------------------------------------
# Key used for encrypting sensitive data in database
SECRET_ENCRYPTION_KEY=my-secret-key-change-in-production

# --------------------------------------------
# CORS Configuration
# --------------------------------------------
CORS_OVERRIDE_ALLOWED_ORIGINS=http://localhost:5000,http://localhost:3000

# --------------------------------------------
# RAG Configuration
# --------------------------------------------
NO_ANSWER_TEXT="It seems that the answer to your question is not available in the resources I have access to. Please modify your question."

# --------------------------------------------
# Azure OpenAI API Configuration
# --------------------------------------------
# Uncomment and configure if using Azure OpenAI
# AZURE_BASE_URL=https://CHANGE_ME.openai.azure.com
# AZURE_OPENAI_API_VERSION=2023-05-15
# AZURE_OPENAI_DEPLOYMENT_NAME=ChatGPT-35-turbo
# AZURE_OPENAI_API_KEY=CHANGE_ME
# AZURE_EMBEDDING_DEPLOYMENT_NAME=ada

# --------------------------------------------
# Data Source Integrations (Optional)
# --------------------------------------------

# SharePoint Configuration
# SHAREPOINT_TENANT_ID=CHANGE_ME
# SHAREPOINT_CLIENT_ID=CHANGE_ME
# SHAREPOINT_CLIENT_CERT_THUMBPRINT=CHANGE_ME
# SHAREPOINT_CLIENT_CERT_PRIVATE_KEY=CHANGE_ME

# Confluence Configuration
# CONFLUENCE_USERNAME=CHANGE_ME
# CONFLUENCE_TOKEN=CHANGE_ME

# Salesforce Configuration
# SALESFORCE_USERNAME=CHANGE_ME
# SALESFORCE_PASSWORD=CHANGE_ME
# SALESFORCE_TOKEN=CHANGE_ME

# RightNow Configuration
# RIGHTNOW_USERNAME=CHANGE_ME
# RIGHTNOW_PASSWORD=CHANGE_ME

# Fluid Topics Configuration
# FLUID_TOPICS_API_KEY=CHANGE_ME
# FLUID_TOPICS_SEARCH_API_URL=CHANGE_ME
# FLUID_TOPICS_PDF_API_URL=CHANGE_ME
# FLUID_TOPICS_VIEWER_BASE_URL=CHANGE_ME

# HubSpot Configuration
# HUBSPOT_ACCESS_TOKEN=CHANGE_ME

# --------------------------------------------
# Observability Configuration
# --------------------------------------------
OBSERVABILITY_ENABLED=true
# OBSERVABILITY_METRICS_EXPORTERS=otlp-http,azure
OBSERVABILITY_METRICS_EXPORT_INTERVAL_MS=3000
# OBSERVABILITY_TRACES_EXPORTERS=internal,otlp-http,azure
OBSERVABILITY_TRACES_MAX_EXPORT_BATCH_SIZE=100
OBSERVABILITY_USAGE_SHOW_USERS=false
# APPLICATIONINSIGHTS_CONNECTION_STRING=CHANGE_ME

# --------------------------------------------
# Advanced Configuration
# --------------------------------------------

# Parallelization config
SOURCE_SYNC_PARALLEL_THREADS_NUM=10

# API Key Authentication for backend-to-backend communication
# Multiple API keys can be set up using format API_KEY_<system_code>
# Values can be comma-separated for key rotation
# API_KEY_SIEBEL=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# API_KEY_SALESFORCE=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Security schemas for API Tool providers
# API_PROVIDER_SIEBEL='{"server_url":"https://siebel.example.com","security_schema":{"scheme":"basic","type":"http"},"auth_params":{"username":"USERNAME","password":"PASSWORD"}}'
# API_PROVIDER_SALESFORCE='{"server_url":"https://salesforce.example.com","security_schema":{"type":"oauth2","flows":{"clientCredentials":{"tokenUrl":"https://salesforce.example.com/token"}}},"auth_params":{"client_id":"CLIENT_ID","client_secret":"CLIENT_SECRET"}}'

# Q&A Configuration
QA_SYSTEM_PROMPT_TEMPLATE_CODE=QA_SYSTEM
